<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>consoleå°æ¸¸æˆ</title>
</head>

<body>

    <p><b>æ§åˆ¶å°å°æ¸¸æˆ</b></p>
    <span>é€šè¿‡åœ¨consoleæ§åˆ¶å°è¾“å…¥startGame(),è¿›å…¥æ¸¸æˆ</span>
    <span>é€šè¿‡å°é”®ç›˜çš„ä¸Šä¸‹å·¦å³è¿›è¡Œå°è½¦çš„ç§»åŠ¨èº²é¿å­å¼¹</span>


    <script>
        // ç”»å¸ƒå†…æ•°ç»„
        let result = new Array();
        // èƒŒæ™¯ç”»å¸ƒé•¿å®½
        const bg = {
            width: 5,
            height: 5
        }

        // åœ¨æ§åˆ¶å°è¾“å…¥startï¼Œè¿›å…¥æ¸¸æˆ
        window.startGame = function () {

            // åˆå§‹åŒ–ç”»å¸ƒ
            /*
            row  è¡Œ   
            col  åˆ—
            x[0][0] x[0][1] x[0][2] x[0][3] x[0][4] 
            x[1][0] x[1][1] x[1][2] x[1][3] x[1][4] 
            x[2][0] x[2][1] x[2][2] x[2][3] x[2][4] 
            x[3][0] x[3][1] x[3][2] x[3][3] x[3][4] 
            x[4][0] x[4][1] x[4][2] x[4][3] x[4][4] 
           
            */
            // x[0]  x[1]...x[4] æ¯ä¸€åˆ—
            for (let x = 0; x < bg.height; x++) {
                // åˆ—çš„æ•°é‡
                let col = new Array();
                // x[0][0] x[0][1]...x[0][4]
                // å¡«å……æ¯ä¸€è¡Œçš„æ•°æ®
                for (let y = 0; y < bg.width; y++) {
                    col[y] = "ğŸ";
                }
                // å°†æ¯ä¸€è¡Œå¡«å……å¥½çš„æ•°æ®å¡«å……è¿›resultæ•°ç»„çš„æ¯ä¸€åˆ—é‡Œï¼Œå½¢æˆäºŒç»´æ•°ç»„
                result[x] = col;

            }

            // ç”¨æˆ·ä½ç½®
            let userX = 2;
            let userY = result.length - 1;
            let ud = 0;

            // console.log(userY)

            // åˆå§‹åŒ–ç”¨æˆ·ä½ç½®
            // å®šä½åˆ°æ•°ç»„çš„æœ€åä¸€è¡Œ
            // result[result.length - 1][userX] = "ğŸš—";
            result[userY][userX] = "ğŸš—";

            // å¼€å§‹æ¸¸æˆåï¼Œç­‰å¾…2så†è¿›è¡Œæ¸¸æˆçš„æ¸²æŸ“ï¼Œæ–¹ä¾¿ç”¨æˆ·å‡†å¤‡
            setTimeout(() => {

                // æ¯éš”1sæ‰§è¡Œä¸€æ¬¡ï¼Œæ‰“å°ç”»å¸ƒ
                let game = setInterval(() => {


                    // åˆ é™¤æœ€åä¸€è¡Œæ•°ç»„ï¼Œè¾¾åˆ°å‘ä¸Šç§»åŠ¨çš„æ•ˆæœ
                    // å¿…é¡»é™©äº›è¿™ä¸ªåˆ é™¤æœ€åä¸€è¡Œæ•°ç»„çš„æ“ä½œï¼Œå¦åˆ™ä¼šå› ä¸ºåœ¨é¡¶éƒ¨æ·»åŠ äº†æ–°çš„ä¸€è¡Œæ•°ç»„ï¼Œè€Œçœ‹ä¸è§å°è½¦
                    result.pop();

                    userY = result.length - 1 + ud;
                    // lastY = userY - ud;
                    // æƒ³è¦åˆ¤å®šè¾“èµ¢ï¼Œå°±æ˜¯åœ¨é‡æ–°å®šä½ç©å®¶çš„æ—¶å€™ï¼Œæ£€æµ‹æ­¤ä½ç½®ä¸Šæ˜¯å¦æœ‰å­å¼¹ï¼Œæœ‰åˆ™è¾“äº† 
                    //  å¹¶ä¸”è¿˜è¦åŠ ä¸Šåˆ¤æ–­æ˜¯å¦ä¸ºçˆ†ç…§æ•ˆæœï¼Œå› ä¸ºè¦é˜²æ­¢ä¸‹1såˆ·æ–°æ— æ³•è¿›å»ç»“æŸè¯­å¥ï¼Œå¯¼è‡´ç»§ç»­åˆ·æ–°ï¼Œäº§ç”Ÿç”¨æˆ·çš„ä½ç½®
                    // if (result[result.length - 1][userX] === "ğŸš€" || result[result.length - 1][userX] === "ğŸ‡") {
                    if (result[userY][userX] === "ğŸš€" || result[userY][userX] === "ğŸ‡") {

                        // å»¶è¿Ÿ1sç»“æŸ setTimeout å»¶æ—¶å‡ ç§’åå†æ‰§è¡Œé‡Œé¢çš„æ“ä½œ
                        setTimeout(() => {

                            // å‘ç”Ÿç¢°æ’å°±æŠŠç”¨æˆ·çš„ä½ç½®æ¢æˆçˆ†ç‚¸æ•ˆæœ
                            // result[result.length - 1][userX] = "ğŸ‡";
                            result[userY][userX] = "ğŸ‡";
                            // æ’­æ”¾éŸ³æ•ˆ
                            // new Audio("./music/123.mp3").play();

                            //ç»“æŸå®šæ—¶å™¨çš„æ‰§è¡Œ
                            clearInterval(game);

                            // æ¸…é™¤æ‰“å°çš„ç”»å¸ƒç­‰
                            // console.clear();
                            // é€šè¿‡%cè¿›è¡Œcssè®¾ç½®
                            console.log("%cOVER", "color:red; font-size:48px");


                        }, 200)
                    }
                    // é‡æ–°å®šä½ç©å®¶çš„ä½ç½®
                    else {
                        result[userY][userX] = "ğŸš—";
                    }



                    // åœ¨å¤´éƒ¨è¡Œæ·»åŠ ä¸€è¡Œæ–°çš„
                    // new Array(5).fill("ğŸ") å¿«é€Ÿæ·»åŠ 5ä¸ªæ•°ç»„å€¼ï¼Œå†…å®¹åœ¨fillé‡Œå¡«å……
                    result.unshift(new Array(bg.width).fill("ğŸ"))

                    // ç”Ÿæˆéšæœºå­å¼¹
                    result[0][parseInt(Math.random() * bg.width)] = "ğŸš€";



                    // è¦æŠŠresultè½¬æˆå­—ç¬¦ä¸²æ‰“å°å°±ä¸ä¼šæœ‰æ•°ç»„çš„æ ·å¼äº†
                    let str = ""
                    // resultçš„æ¯ä¸€è¡Œ
                    for (let row = 0; row < result.length; row++) {
                        let colstr = "";
                        // resultçš„æ¯ä¸€è¡Œçš„æ•°æ®ï¼Œä¸€å…±colè¡Œ
                        for (let col = 0; col < result[row].length; col++) {
                            // æŠŠæ¯ä¸€è¡Œæ¯ä¸€åˆ—çš„æ•°æ®ä¿å­˜ç»™colstr
                            colstr += result[row][col];

                        }
                        // æ¯å¾ªç¯å®Œä¸€è¡Œï¼Œå°±åŠ ä¸€ä¸ª\n
                        str += colstr + "\n"
                    }
                    // å› ä¸ºæ¯æ¬¡éƒ½ä¼šæœ‰æ•°å­—æç¤ºæ‰“å°äº†å¤šå°‘æ¬¡ï¼Œæ‰€ä»¥è¦ä¸æ˜¾ç¤ºæ•°å­—
                    // æ‰€ä»¥ï¼Œæ¸…ç©ºæ§åˆ¶å°åœ¨æ‰“å°ï¼Œå°±ä¸æœ‰é‡å¤çš„æ•°å­—äº†
                    // console.clear()
                    // æ‰“å°ç”»å¸ƒ
                    console.log(str)

                }, 1000)

                // é”®ç›˜æ“ä½œ
                window.onkeydown = function (e) {
                    // e.keyCode === 37å°±æ˜¯å°é”®ç›˜çš„å·¦ç§»é”®
                    if (e.keyCode === 37 && userX > 0) {
                        userX--;
                    }
                    else if (e.keyCode === 39 && userX < bg.width - 1) {
                        userX++;
                    }
                    else if (e.keyCode === 40 && ud < 0) {
                        ud++;
                    }
                    else if (e.keyCode === 38 && ud > -(bg.height - 1)) {


                        ud--;
                    }
                }

            }, 2000)


        }





    </script>
</body>

</html>